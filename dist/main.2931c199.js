!function(){var t={};Object.defineProperty(t,"__esModule",{value:!0});var n=(D=void 0,$=t.Action=D,W=t.initialState=$,H=t.reducer=W,Q=t.mkNumber=H,t.lastIsOperator=Q);t.handleEquals=n;var r={};Object.defineProperty(r,"__esModule",{value:!0});var e=void 0;r.default=e;var u,o,i,a,c=(a=function(t){return i({Left:function(t){return u(t)},Right:function(n){return t(n)}})},{Left:u=function(t){return{isLeft:!0,value:t}},Right:o=function(t){return{isLeft:!1,value:t}},match:i=function(t){return function(n){return n.isLeft?t.Left(n.value):t.Right(n.value)}},bind:a,chain:function(t){return function(n){return a(n)(t)}},pure:o,map:function(t){return i({Left:function(t){return u(t)},Right:function(n){return o(t(n))}})}}),f=function(){var t=function(t){return function(n){return n.isJust?t.Just(n.value):t.Nothing()}};return{Nothing:{isJust:!1},Just:function(t){return{isJust:!0,value:t}},match:t,maybe:function(n){return function(r){return t({Nothing:function(){return n},Just:function(t){return r(t)}})}}}}();e={Either:c,Maybe:f,String:{append:function(t){return function(n){return t.concat(n)}},empty:""},takeWhile:function(t){return function(n){for(var r=[],e=0;e<n.length;e++){if(!t(n[e]))return r;r.push(n[e])}return r}},panic:function(t){throw new Error(t)},any:function(t){return function(n){return n.reduce((function(n,r){return t(r)||n}),!1)}},last:function(t){return t[t.length-1]},lastBy:function(t){return function(n){return n.reduce((function(n,r){return t(r)?f.Just(r):n}),f.Nothing)}},compose:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(t){return n.reduceRight((function(t,n){return n(t)}),t)}},fold:function(t){return function(n){return n.reduce((function(n,r){return t.append(n)(r)}),t.empty)}},tail:function(t){return t.slice(0,t.length-1)},roundSig:function(t){return function(n){if(0===n)return 0;var r=Math.ceil(Math.log10(n<0?-n:n)),e=t-r,u=Math.pow(10,e);return Math.round(n*u)/u}}},r.default=e;var l,d=(l=r)&&l.__esModule?l:{default:l},s={};Object.defineProperty(s,"__esModule",{value:!0});var p=(M=void 0,_=s.Token=M,T=s.Expr=_,s.parse=T);s.interpret=p;var m=function(t){return t&&t.__esModule?t:{default:t}}(r);function v(t){return function(t){if(Array.isArray(t))return b(t)}(t)||h(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t){return function(t){if(Array.isArray(t))return t}(t)||h(t)||g(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,n){if(t){if("string"==typeof t)return b(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(t,n):void 0}}function b(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function h(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var A,S,k=m.default.Either,w=k.Left,O=k.Right,j=(S=(A=function(t){return function(n){return{tag:t,value:n}}})("operator"),{precedence:function(t){return{add:1,subtract:1,multiply:2,divide:2}[t]},isNumber:function(t){return"number"===t.tag},isOperator:function(t){return"operator"===t.tag},number:A("number"),operator:S,add:S("add"),subtract:S("subtract"),multiply:S("multiply"),divide:S("divide")}),M=j;s.Token=M;var E,N={match:function(t){return function(n){switch(n.tag){case"val":return t[n.tag](n.left);case"binary":return t[n.tag](n.left)(n.right)(n.operator);default:return m.default.panic("Unknown Expr tag ".concat(n.tag))}}},val:function(t){return E("val")(t)()()},binary:(E=function(t){return function(n){return function(r){return function(e){return{tag:t,left:n,right:r,operator:e}}}}})("binary")},_=N;s.Expr=_;var T=function(t){var n=function(t,n){return n.reduce((function(t,n){var r=y(t),e=r[0],u=r[1],o=r.slice(2);return[N.binary(u)(e)(n)].concat(v(o))}),t)},r=t.reduce((function(t,r){var e=t.operands,u=t.operators;if("number"===r.tag)return{operands:[N.val(r.value)].concat(v(e)),operators:u};var o,i=m.default.takeWhile((o=r.value,function(t){return j.precedence(o)<=j.precedence(t)}))(u);return{operands:n(e,i),operators:[r.value].concat(v(u.slice(i.length)))}}),{operands:[],operators:[]});return n(r.operands,r.operators)[0]};s.parse=T;function I(t){return function(t){if(Array.isArray(t))return B(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return B(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}p=function(t){var n={add:function(t){return function(n){return O(t+n)}},subtract:function(t){return function(n){return O(t-n)}},multiply:function(t){return function(n){return O(t*n)}},divide:function(t){return function(n){return 0===n?w("Undefined"):O(t/n)}}};return function t(r){return N.match({val:function(t){return O(t)},binary:function(r){return function(e){return function(u){return k.chain(t(r))((function(r){return k.chain(t(e))((function(t){return n[u](r)(t)}))}))}}}})(r)}(t)},s.interpret=p;var J,L=d.default.Maybe,R=L.Nothing,q=L.Just,C=d.default.Either,x=C.Left,P=C.Right,U={match:function(t){return function(n){return t[n.tag](n.value)}},digit:(J=function(t){return function(n){return{tag:t,value:n}}})("digit"),dot:J("dot")(),operator:J("operator"),equals:J("equals")(),clear:J("clear")()},D=U;t.Action=D;var z=function(){return{tokens:[],numberBuilder:[],error:R}},$=z;t.initialState=$;var W=function(t){return function(n){var r=n.tokens,e=n.numberBuilder;return U.match({digit:function(t){return{tokens:r,numberBuilder:V(e)?e:[].concat(I(e),[String(t)]),error:R}},dot:function(){return{tokens:r,numberBuilder:F(e)?e:[].concat(I(e),["."]),error:R}},operator:function(t){return{tokens:0===e.length?0===r.length?[]:K(r)?[].concat(I(d.default.tail(r)),[s.Token.operator(t)]):[].concat(I(r),[s.Token.operator(t)]):[].concat(I(r),[G(e),s.Token.operator(t)]),numberBuilder:[],error:R}},equals:function(){return Z(r,e)},clear:function(){return z()}})(t)}};t.reducer=W;var F=d.default.any((function(t){return"."===t})),G=d.default.compose(s.Token.number,Number,d.default.fold(d.default.String)),H=G;t.mkNumber=H;var K=d.default.compose((function(t){return t&&s.Token.isOperator(t)}),d.default.last),Q=K;t.lastIsOperator=Q;var V=function(t){return t.filter((function(t){return"."!==t})).length>=10},X=C.bind((function(t){return String(t).split(".")[0].split("").length>10?x("Error"):P(t)})),Y=d.default.compose(X,s.interpret,s.parse),Z=function(t,n){var r=Y(0===n.length?tt(t):[].concat(I(t),[G(n)]));return C.match({Left:function(t){return{tokens:[],numberBuilder:[],error:q(t)}},Right:function(t){return{tokens:[s.Token.number(t)],numberBuilder:[],error:R}}})(r)};n=Z,t.handleEquals=n;var tt=function(t){return d.default.last(t)&&"operator"===d.default.last(t).tag?d.default.tail(t):t},nt={};Object.defineProperty(nt,"__esModule",{value:!0});var rt=(it=void 0,ct=nt.display=it,nt.intermediateDisplay=ct);nt.numDisplay=rt;var et=function(t){return t&&t.__esModule?t:{default:t}}(r);var ut=et.default.Maybe,ot=function(t){var n=t.tokens,r=t.numberBuilder,e=t.error;return ut.match({Just:function(t){return t},Nothing:function(){return 0===r.length?at(n,r):ft(n,r)}})(e)},it=ot;nt.display=it;var at=function(n,r){var e=lt(et.default.tail(n));return ut.match({Nothing:function(){return ft(n,r)},Just:function(e){return s.Token.precedence(e.value)===s.Token.precedence(et.default.last(n).value)?ot((0,t.handleEquals)(n,r)):ft(n,r)}})(e)},ct=at;nt.intermediateDisplay=ct;var ft=function(t,n){return 0===n.length?ut.maybe("")((function(t){return String(et.default.roundSig(10)(t.value))}))(dt(t)):et.default.fold(et.default.String)(n)};rt=ft,nt.numDisplay=rt;var lt=et.default.lastBy(s.Token.isOperator),dt=et.default.lastBy(s.Token.isNumber),st={};Object.defineProperty(st,"__esModule",{value:!0});var pt=(gt=void 0,bt=st.initialize=gt,At=st.redraw=bt,st.view=At);st.calculator=pt;var mt=function(t){return t&&t.__esModule?t:{default:t}}(r);function vt(t){return function(t){if(Array.isArray(t))return yt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return yt(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yt(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}var gt=function(t){return function(n){var r=t.getElementById("app"),e=ht(t)(n);r.append(e)}};st.initialize=gt;var bt=function(t){return function(n){t.getElementById("display").textContent=n}};st.redraw=bt;var ht=function(t){return mt.default.compose(St(t),kt)},At=ht;st.view=At;var St=function(t){return function(n){var r=n.children.map(St(t)),e=t.createElement(n.tagName);return e.append.apply(e,vt(r)),Object.assign(e,n.props)}},kt=function(t){return Ct("div",{className:"calculator"},[Ot,jt,Mt,Bt].concat(vt([7,8,9].map(Et)),[It],vt([4,5,6].map(Et)),[Jt],vt([1,2,3].map(Et)),[Lt,Nt,_t,Rt]).map((function(n){return n(t)})))};pt=kt,st.calculator=pt;var wt,Ot=function(){return Ct("div",{className:"display",id:"display"},[])},jt=function(n){return qt((function(){return n(t.Action.clear)}),"digit span-2","C")},Mt=function(){return Ct("div",{className:"padding"},[])},Et=function(n){return function(r){return qt((function(){return r(t.Action.digit(n))}),"digit",n)}},Nt=function(n){return qt((function(){return n(t.Action.digit(0))}),"digit span-2",0)},_t=function(n){return qt((function(){return n(t.Action.dot)}),"digit",".")},Tt=function(n,r){return function(e){return qt((function(){return e(t.Action.operator(n))}),"operator",r)}},It=Tt("multiply","*"),Bt=Tt("divide","/"),Jt=Tt("subtract","-"),Lt=Tt("add","+"),Rt=function(n){return qt((function(){return n(t.Action.equals)}),"operator","=")},qt=function(t,n,r){return Ct("button",{onclick:t,className:n,textContent:r},[])},Ct=function(t,n,r){return{tagName:t,props:n,children:r}};wt=(0,t.initialState)(),(0,st.initialize)(document)((function(n){wt=(0,t.reducer)(n)(wt),(0,st.redraw)(document)((0,nt.display)(wt))}))}();
//# sourceMappingURL=main.2931c199.js.map
